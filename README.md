# 1. 项目简介
# 2. 工具版本
|Tool|Version|
|-|-|
|hadoop|3.13|
|flume|1.9.0|
|hive|3.12|
|zookeeper|3.5.7|
|hbase|2.0.5|
|kafka|2.4.1|
|kylin|3.0.2|
|mysql|5.7.16|
|spark|3.0.0|
|sqoop|1.4.6|
|superset||
# 3. 项目架构
### 3.1 数据模块
数据分位两类：**业务交互数据**和**埋点用户行为数据**
- 业务交互数据：业务流程中产生的登录、订单、用户、商品、支付等相关的数据，通常存储在DB中，包括Mysql、Oracle等
- 埋点用户行为数据：用户在使用产品过程中，与客户端产品交互过程中产生的数据，比如页面浏览、点击、停留、评论、点赞、收藏等
 
用户行为数据主要包括**页面数据**、**事件数据**、**曝光数据**、**启动数据**和**错误数据**。具体就是普通页面埋点日志和启动日志(两个json对象)。
- 页面数据：记录一个页面的用户访问情况，包括访问时间、停留时间
- 事件数据：主要记录应用内一个具体操作行为，包括操作类型、操作对象
- 曝光数据：主要记录页面所曝光的内容，包括曝光对象，曝光类型等信息
- 启动数据：记录应用的启动信息
- 错误数据：记录应用使用过程中的错误信息，包括错误编号及错误信息

用户行为数据通过java代码模拟生成，使用的json格式，分为连个json对象。
# 4. 数仓
## 数据仓库分层
|||功能|
|-|-|-|
|ODS|Operation DataStore 数据原始层|存放原始数据|
|DWD|Data warehouse Detail 明细数据层|对ODS层数据进行清洗等，保存明细数据|
|DWS|Data warehouse service 服务数据层|以DWD为基础，按天进行汇总|
|DWT|Data Warehouse Topic 主题层|以DWS层为基础，对数据进行累积汇总|
|ADS|Application Data Store 应用层|ADS层为各种统计报表提供数据|
## 维度建模
维度建模通常以一个事实表为中心进行表的组织，把相关各种表整理成两种：**事实表**和**维度表**两种
### 事实表和维度表
事实表每行代表一个业务事件，如下单事实表、支付事实表等

维度表是对事实的描述信息，对应现实世界中的一个对象，如日期维度表，地区维度表。
### 维度模型分类
常分为三种模型：
- 星型模型
- 雪花模型
- 星座模型

雪花模型与星型模型的区别主要在于维度的层级，标准的雪花模型维度只有一层，而雪花模型可能涉及多级。

星座模型与前两种模型的区别是事实表的数量，星座模型是基于多个事实表。
## 数仓建模
### ODS层
- 保持数据原貌不做修改
- 采用压缩 
- 创建分区表，避免全表扫描

> hive hadoop支持哪些压缩格式？自动分区？存储格式？
### DWD层
1) 对用户行为数据解析。
2) 对核心数据进行判空过滤。
3) 对业务数据采用维度模型重新建模。

DWD层需构建维度模型，一般采用星型模型

维度建模一般按照以下四个步骤： 选择业务过程(确定事实表)→声明粒度→确认维度→确认事实

###  DWS层与DWT层
DWS层和DWT层统称宽表层。

DWS层、DWT层和ADS层都是以需求为驱动，和维度建模已经没有关系了。

DWS和DWT都是建宽表，按照主题去建表。
